<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Backbone.js Todos</title>
</head>
<body>
<div style="overflow:hidden; position:relative; border:1px solid #000; width:500px; height:500px; margin:0 auto;">
	<div id="todoapp" style="position:absolute; top:0; right:-500px; background:#fff; width:500px; height:500px;">
		<header>
			<h1>Todos</h1>
			<button onClick="HomeAjaxLoader('http://donaiya.nextus.asia/home.json', 'home', 'todoapp');">Home</button>
			<button onClick="HomeAjaxLoader('http://donaiya.nextus.asia/about.json', 'about', 'about');">About</button>
		</header>
		<section></section>
	</div>
	<div id="about" style="position:absolute; top:0; right:-500px; background:#fff; width:500px; height:500px;">
		<header>
			<h1>Todos</h1>
			<button onClick="HomeAjaxLoader('http://donaiya.nextus.asia/home.json', 'home', 'todoapp');">Home</button>
			<button onClick="HomeAjaxLoader('http://donaiya.nextus.asia/about.json', 'about', 'about');">About</button>
		</header>
		<section></section>
	</div>
</div>
<script src="js/jquery.js"></script>
<script src="js/jquery.easing.min.js"></script>
<!--script src="js/json2.js"></script>
<script src="js/underscore.js"></script>
<script src="js/backbone.js"></script>
<script src="js/backbone.localStorage.js"></script-->
<script type="text/javascript">
	HomeAjaxLoader('http://donaiya.nextus.asia/home.json', 'home', 'todoapp');
	function HomeAjaxLoader(link, storageName, holder)
	{
		//var link = 'http://localhost/ci_donaiya/index.php/page/edit';
		//var link = 'http://donaiya.nextus.asia';
		//var link = 'home.json';
		//var link = 'http://donaiya.nextus.asia/home.json';

		if(window.localStorage && window.localStorage.getItem(storageName))
		{
			//alert('tazki is available');
			data = JSON.parse(localStorage.getItem(storageName));

			$('#' + holder).animate(
			{
				right:0
			}, 'slow');

			$('header h1').html(data['tab_name']);
			$('section').html(data['page_description']);
		}
		else
		{
			$.getJSON(link, function(data)
			{alert('run ajax');
				if(window.localStorage)
				{
					localStorage.setItem( storageName, JSON.stringify(data) );
				}

				$('#' + holder).animate(
				{
					right:0
				}, 'slow');

				console.log( JSON.parse( localStorage.getItem(storageName) ) );
				$('header h1').html(data['tab_name']);
				$('section').html(data['page_description']);

				/* var items = [];
				$.each(data, function(key, val) {
				items.push('<li id="' + key + '">' + val + '</li>');
				});
				$('<ul/>', {
				'class': 'my-new-list',
				html: items.join('')
				}).appendTo('body');*/
			});
		}
	}
</script>
</body>
</html>