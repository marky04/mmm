<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Backbone.js Todos</title>
  <link rel="stylesheet" href="todos.css" />
</head>
<body>
<div id="todoapp">
	<header>
		<h1>Todos</h1>
	</header>
	<section></section>
	<footer>
		<a id="clear-completed">Clear completed</a>
		<div id="todo-count"></div>
	</footer>
</div>
<script src="js/jquery.js"></script>
<!--script src="js/json2.js"></script>
<script src="js/underscore.js"></script>
<script src="js/backbone.js"></script>
<script src="js/backbone.localStorage.js"></script-->
<script type="text/javascript">
	HomeAjaxLoader();
	function HomeAjaxLoader()
	{
		//var link = 'http://localhost/ci_donaiya/index.php/page/edit';
		//var link = 'http://donaiya.nextus.asia';
		//var link = 'test.json';
		var link = 'http://donaiya.nextus.asia/test.json';
		
		if(window.localStorage && window.localStorage.getItem('car'))
		{
			alert('tazki is available');
			data = JSON.parse(localStorage.getItem('car'));
			$('header h1').html(data['tab_name']);
			$('section').html(data['page_description']);
		}
		else
		{
			$.getJSON(link, function(data)
			{alert('run ajax');
				if(window.localStorage)
				{
					localStorage.setItem( 'car', JSON.stringify(data) );
				}				
				
				console.log( JSON.parse( localStorage.getItem( 'car' ) ) );
				$('header h1').html(data['tab_name']);
				$('section').html(data['page_description']);
				
				/* var items = [];
				$.each(data, function(key, val) {
				items.push('<li id="' + key + '">' + val + '</li>');
				});
				$('<ul/>', {
				'class': 'my-new-list',
				html: items.join('')
				}).appendTo('body');*/
			});
		}
	}
</script>
</body>
</html>