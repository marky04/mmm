<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Cover Flow</title>
	<link rel="stylesheet" href="coverflow.css"/>
</head>
<body>
	<div id="container"></div>
	<script src="coverflow.js"></script>
	<script src="jquery.js"></script>
	<script src="jquery.swipe.js"></script>
	<script>
		function reset() {

			var replacement = document.createElement('div');
			replacement.id = "container";

			var el = document.getElementById('container');
			el.parentNode.replaceChild(replacement, el);
			
			//$('#container').coverflow({
			coverflow('container').setup({
				item: 1,
				//mode: "flash",
				//backgroundcolor: '009900',
				//backgroundopacity: 0,
				//wmode: 'transparent',
				//gradientcolor: 'ff0000',
				//showduration: true,
				//playlist: "playlist.json",
				//playlist: "http://api.flickr.com/services/feeds/groups_pool.gne?id=807213@N20&format=json&jsoncallback=?",
				//route: {
				// 	playlist: "items",
				// 	image: "media.m"
				//},
				playlist: [
					{
						"title": "",
						"description": "",
						"image": "http://d3el35u4qe4frz.cloudfront.net/eawtAP1q-720.jpg",
						"link": "http://www.google.com/",
						"duration": "183"
					},
					{
						"title": "",
						"description": "",
						"image": "http://d3el35u4qe4frz.cloudfront.net/njZMLMwy-720.jpg",
						"duration": "782"
					},
					{
						"title": "",
						"description": "",
						"image": "http://d3el35u4qe4frz.cloudfront.net/Vg7cPUdl-720.jpg"
					}
				],
				coverwidth: 180,
				coverheight: 150,
				fixedsize: false,
				textoffset: 50
			})
			.on('ready', function() {

				this.on('focus', function(index) {
					document.getElementById('focusindex').innerHTML = index;
				});
				
				this.on('click', function(index, link) {
					document.getElementById('clickindex').innerHTML = index;
					console.log(link);
				});
			});
		}

		reset();
	</script>

<div style="width:480px;">
	<div style="float:right;">Focused: <b id="focusindex">0</b> | Clicked: <b id="clickindex">0</b></div>
	<p>
		<a href="javascript:;" onclick="coverflow().left();">Left</a> - <a href="javascript:;" onclick="coverflow().right();">Right</a>
	</p>
	<p>
		<a href="javascript:;" onclick="coverflow().prev();">Previous</a> - <a href="javascript:;" onclick="coverflow().next();">Next</a>
	</p>
	<p>
		<input id="toval" value="0" size="1"> <a href="javascript:;" onclick="coverflow().to(document.getElementById('toval').value);">To</a>
	</p>
</div>

<button onclick="reset();">Reset</button>

<script type="text/javascript">
onLoad();
function onLoad()
{
	$('#container').touchSwipeLeft(function()
	{
		coverflow().next();
	});

	$('#container').touchSwipeRight(function()
	{
		coverflow().prev();
	});
}
</script>

</body>
</html>